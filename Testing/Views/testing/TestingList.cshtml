@model TestingModel.Testing_Model

@{
    ViewBag.Title = "TestingList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="panel panel-inverse">
    <div class="panel-body">
        <table id="tbTesting" class="table table-striped reducepadding table-bordered table-td-valign-middle" style="width:100%">
            <thead>
                <tr>
                    <th style="width:30%">ID</th>
                    <th style="width:30%">Title</th>
                    <th style="width:20%">Description</th>
                    <th style="width:30%">UpdatedDate</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>


 @section Scripts
{
        <script type="text/javascript">
            $(document).ready(function () {
           
                var a = {
                    ID:'',
                };
                    var response = CalltoApiController('@Url.Action("GetData", "api/TestingAPI")', a);
                    alert(response);

                var TestingInfo = {
                    ID: "06",
                    Title: "CKM1",
                    Description: "CKM",
                    Mode: "Insert"
                };

                if (TestingInfo.Mode == 'Insert' || TestingInfo.Mode == 'Update' || TestingInfo.Mode == 'Delete') {

                    var response = CalltoApiController('@Url.Action("TestingCUD", "api/TestingAPI")', TestingInfo);
                    alert(response);
                }    
                else {
                    alert("No Mode");
                }
            //BindTable(response);
        });

        @*function BindTable(response) {
            debugger;
            table = $('#tbTesting').DataTable({
                responsive: true,
                data: JSON.parse(response),
                datasrc: "",
                destroy: true,
                "paging": true,
                "ordering": true,
                "columns": [
                    { "data": "ID", "className": "align-center" },
                    { "data": "Title", "className": "align-center" },
                    { "data": "Description", "className": "align-center" },
                    { "data": "UpdatedDate", "className": "align-center"},
                ],
                "columnDefs": [{
                    "targets": 0,
                    "data": "ID",
                    "render": function (data) {
                        return '<button type="button" class="btn btn-info" style="width:50px;margin:3px;padding-top:3px;" title="変更" onclick="AnimalEdit(this)">変更<button type="button" class="btn btn-danger" style="width:50px;margin:3px;padding-top:3px;" title="削除" onclick="AnimalDelete(this)">削除</button>'

                    },
                }],
                "oLanguage": {
                    "sSearch": "検索条件"
                }
            });
            $('div.dataTables_filter input', table.table().container()).focus();
        }

        function AnimalEdit(row) {
            var currentRow = $(row).closest("tr");
            var data = $('#tbTesting').DataTable().row(currentRow).data();
            var url = '@Url.Action("Testingindex", "Testing")?ID=' + data["ID"] + '&Mode=Insert';
            location.href = url;
        }

        function AnimalDelete(row) {
            var currentRow = $(row).closest("tr");
            var data = $('#tbTesting').DataTable().row(currentRow).data();
            var url = '@Url.Action("Testingindex", "Testing")?ID=' + data["ID"] + '&Mode=Delete';
            location.href = url;
        }*@


                </script>
            }

